<div class="card mt-2" *ngIf="user">
  <header class="post-header">
    <img [src]="user.photoUrl" alt="Imagen de Perfil" class="circle" />
    <h5>{{ user.name }}</h5>
  </header>
  <main class="post-main">
    <video controls [src]="post.url"></video>
    <div class="post-information">
      <div class="post-likes">
        <mat-icon *ngIf="!isLiked" (click)="addLike()"
          >favorite_outline</mat-icon
        >
        <mat-icon *ngIf="isLiked" (click)="removeLike()">favorite</mat-icon>
        <span class="text-bold">
          {{ likes.length }} {{ likes.length === 1 ? "like" : "likes" }}
        </span>
      </div>
      <div class="post-description">
        <span class="text-bold">{{ user.name }} </span>
        <span>{{ post.description }}</span>
      </div>
      <p
        *ngIf="!showComments && comments.length > 0"
        class="post-comments"
        (click)="showComments = true"
      >
        Ver los {{ comments.length }}
        {{ comments.length === 1 ? "comentario" : "comentarios" }}
      </p>
      <p
        *ngIf="showComments && comments.length > 0"
        class="post-comments"
        (click)="showComments = false"
      >
        Ocultar comentarios
      </p>
      <div *ngIf="showComments && comments.length > 0">
        <div *ngFor="let comment of comments">
          <app-comment [comment]="comment"></app-comment>
        </div>
      </div>
      <p class="post-time">{{ timeAgo }}</p>
    </div>
  </main>
  <hr />
  <form autocomplete="off" [formGroup]="commentForm">
    <footer class="post-footer">
      <textarea
        formControlName="comment"
        autocomplete="off"
        rows="1"
        maxlength="150"
        placeholder="AÃ±ade un comentario..."
      ></textarea>
      <button [disabled]="commentForm.invalid" (click)="addComment()">
        Publicar
      </button>
    </footer>
  </form>
</div>
